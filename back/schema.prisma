// This file is automatically generated by Keystone, do not modify it manually.
// Modify your Keystone config when you want to change this.

datasource sqlite {
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
  provider          = "sqlite"
}

generator client {
  provider = "prisma-client-js"
  output   = "node_modules/.prisma/client"
}

model User {
  id        String     @id @default(cuid())
  name      String     @default("")
  age       Int?
  email     String     @unique @default("")
  isAdmin   Boolean    @default(false)
  password  String
  createdAt DateTime?
  updatedAt DateTime?
  userTasks UserTask[] @relation("UserTask_user")
  teams     UserTeam[] @relation("UserTeam_user")
}

model Team {
  id        String     @id @default(cuid())
  name      String     @default("")
  tasks     TeamTask[] @relation("TeamTask_team")
  users     UserTeam[] @relation("UserTeam_team")
  createdAt DateTime?
  updatedAt DateTime?
}

model UserTeam {
  id     String  @id @default(cuid())
  team   Team?   @relation("UserTeam_team", fields: [teamId], references: [id])
  teamId String? @map("team")
  user   User?   @relation("UserTeam_user", fields: [userId], references: [id])
  userId String? @map("user")

  @@index([teamId])
  @@index([userId])
}

model Task {
  id        String     @id @default(cuid())
  title     String     @default("")
  content   String     @default("")
  date      DateTime?
  userTasks UserTask[] @relation("UserTask_task")
  teamTasks TeamTask[] @relation("TeamTask_task")
  createdAt DateTime?
  updatedAt DateTime?
}

model UserTask {
  id     String  @id @default(cuid())
  user   User?   @relation("UserTask_user", fields: [userId], references: [id])
  userId String? @map("user")
  task   Task?   @relation("UserTask_task", fields: [taskId], references: [id])
  taskId String? @map("task")

  @@index([userId])
  @@index([taskId])
}

model TeamTask {
  id     String  @id @default(cuid())
  team   Team?   @relation("TeamTask_team", fields: [teamId], references: [id])
  teamId String? @map("team")
  task   Task?   @relation("TeamTask_task", fields: [taskId], references: [id])
  taskId String? @map("task")

  @@index([teamId])
  @@index([taskId])
}
